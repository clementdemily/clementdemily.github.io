<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Migrer de Amazon Web Service S3 vers Microsoft Azure Blob</title>
	
	<meta name="author" content="Clément Demily">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/clementdemily">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/demily_clement">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:demily.clement+blog@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="https://fr.linkedin.com/in/clementdemily">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
			


			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/a4c48bb0b9e041ad0a5299f82b2b16d9?s=35" class="img-circle" />
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Accueil</a></li>
				<li><a href="/categories.html">Catégories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/">Accueil</a></li>
			<li class="divider"></li>
			<li><a href="/categories.html">Catégories</a></li>
			<li><a href="/tags.html">Tags</a></li>
			<li class="divider"></li>
			<li>
				<a href="/portfolio/" title="portfolio">Portfolio</a>
			</li>
			<li>
				<a href="/cv/" title="cv">CV</a>
			</li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Haut de page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://www.gravatar.com/avatar/a4c48bb0b9e041ad0a5299f82b2b16d9?s=150" class="img-circle" />
	</a>
	<h3 class="title">
		<a href="/">Clément Demily</a>
	</h3>
</header>


<h4 id="bio" class="text-center">
	Notes d'un développeur
</h4>


<div id="pages-list" class="text-center">
	<ul>
		<li>
			<a href="/" title="Accueil">Accueil</a>
		</li>
		<li> | </li>
		<li>
			<a href="/portfolio/" title="portfolio">Portfolio</a>
		</li>
		<li> | </li>
		<li>
			<a href="/cv/" title="cv">CV</a>
		</li>
	</ul>
</div>

<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/clementdemily">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/demily_clement">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:demily.clement+blog@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://fr.linkedin.com/in/clementdemily">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>

<!-- sidebar.html end -->
	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<header>
	<h1>Migrer de Amazon Web Service S3 vers Microsoft Azure Blob </h1>
</header>

<div>

	<div class="col-sm-10">
		<span class="post-date">
			
			October
			15th,
			
			2015
		</span>
		<div class="article_body">
			<h2 id="backups-des-buckets-s3">Backups des buckets S3</h2>

<p>Dans un premier temps, nous ferons une copie locale de nos buckets <strong>S3</strong>.</p>

<p>Pour cela, nous devrons utiliser l’utilitaire <strong>awscli</strong> qui nous permet de manipuler nos services <strong>AWS</strong> depuis notre console.</p>

<p>Installation de awscli sur mac (via homebrew):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="se">\$</span><span class="o">&gt;</span> brew <span class="nb">install </span>awscli</code></pre></figure>

<p>Installation de awscli sur unix (via pip):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="se">\$</span><span class="o">&gt;</span> pip <span class="nb">install </span>awscli</code></pre></figure>

<p>Une fois installé, configurons notre utilitaire:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="se">\$</span><span class="o">&gt;</span> aws configure
AWS Access Key ID <span class="o">[</span>None]:
AWS Secret Access Key <span class="o">[</span>None]:
Default region name <span class="o">[</span>None]:
Default output format <span class="o">[</span>None]:</code></pre></figure>

<p>Vous devez ici remplir les champs avec leur valeur correspondantes.
<a href="http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">lien vers la documentation</a></p>

<p>Vous pouvez dès à présent créer un nouveau dossier et effectuer une copie locale de vos buckets:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$&gt;</span> <span class="nb">mkdir </span>buckets-backup
<span class="nv">$&gt;</span> <span class="nb">cd </span>buckets-backup
<span class="se">\$</span><span class="o">&gt;</span> aws s3 <span class="nb">sync </span>s3://mon-bucket .</code></pre></figure>

<p>Si un message d’erreur en rapport avec une erreur de droit apparait (<em>AccessDenied</em>), verifier bien que l’utilisateur associé a votre configuration dispose des droits nécessaire sur le service <strong>S3</strong> de votre compte <strong>AWS</strong>. <a href="https://console.aws.amazon.com/iam/home">Lien vers IAM</a>.</p>

<p>Si le problème persiste, créer un nouvel utilisateur lui attribuant le droit “<strong>AdministratorAccess</strong>” ou “<strong>AmazonS3FullAccess</strong>”.</p>

<p>Utiliser ensuite ses identifiants pour reconfigurer <strong>awscli</strong>.
<img src="/img/2015/10/IAM.png" alt="IAM" class="center-image" /></p>

<h2 id="transfert-des-buckets-vers-microsoft-blob">Transfert des buckets vers Microsoft Blob</h2>

<p>Nous disposons de plusieurs outils pour transférer des fichiers sur Microsoft Blob (powershell, AzCopy, …)</p>

<p>Nous utiliserons une méthode alternative en utilisant le logiciel gratuit <a href="https://cyberduck.io/">Cyberduck</a>.</p>

<p>Une fois le logiciel installé, cliquer sur le bouton “Connecter” et sélectionner dans le menu déroulant l’option “Windows Azure Storage”
Les informations à saisir se trouve sur votre portail azure.</p>

<p><img src="/img/2015/10/azure-account-storage.png" alt="Azure account storage" class="center-image" /></p>

<p><img src="/img/2015/10/cyberduck.png" alt="Cyberduck" class="center-image" /></p>

<p>Le champ “Nom d’utilisateur” correspond au champ “Account Storage Name”. Le champ “Mot de passe” est une des clés “Access Keys”.</p>

<p>Une fois la connexion établie, il ne vous restera plus qu’a effectuer un “glisser-déposer” dans la fenêtre qui est apparue.</p>

<p>Pour finir, aller sur votre portail et verifier que vos <strong>Containers</strong> (alias buckets) ont bien les droits que vous souhaitez attribuer.
Les containers sont privés par défaut, si vous désirer les rendre public, changer la règle d’accès du container avec la valeur “Container”.</p>

<p><img src="/img/2015/10/containers.png" alt="containers" class="center-image" /></p>

		</div>

		
		<ul class="tag_box list-unstyled list-inline">
			<li><i class="fa fa-folder-open"></i></li>
			
			
			
			<li><a href="/categories.html#tutoriel-ref">
					tutoriel <span>(33)</span>
					,
				</a></li>
			
			<li><a href="/categories.html#microsoft azure-ref">
					microsoft azure <span>(2)</span>
					
				</a></li>
			
			
		</ul>
		

		
		<ul class="list-inline">
			<li><i class="fa fa-tags"></i></li>
			
			
			
			<li>
				<a href="/tags.html#cloud-ref">
					cloud <span>(2)</span>
					,
				</a>
			</li>
			
			<li>
				<a href="/tags.html#s3-ref">
					s3 <span>(1)</span>
					,
				</a>
			</li>
			
			<li>
				<a href="/tags.html#blob-ref">
					blob <span>(1)</span>
					
				</a>
			</li>
			
			
			
		</ul>
		

		<hr>

		<div>
			<section class="share col-sm-6">
				<h4 class="section-title">Partager cet article</h4>
				<a class="btn btn-default btn-sm twitter"
					href="http://twitter.com/share?text=Migrer de Amazon Web Service S3 vers Microsoft Azure Blob&via=demily_clement"
					onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
					<i class="fa fa-twitter fa-lg"></i>
				</a>
				<a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
					onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
					<i class="fa fa-facebook fa-lg"></i>
				</a>
				<a class="btn btn-default btn-sm gplus"
					onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
					<i class="fa fa-google-plus fa-lg"></i>
				</a>

				<a class="btn btn-default btn-sm linkedin"
					onclick="window.open('https://www.linkedin.com/cws/share?url='+window.location.href, 'linkedin-share', 'width=490,height=530');return false;">
					<i class="fa fa-linkedin fa-lg"></i>
				</a>

				<a class="btn btn-default btn-sm linkedin"
					href="mailto:?subject=Article sur clement-demily.fr: Migrer de Amazon Web Service S3 vers Microsoft Azure Blob&body=http://localhost:4000/2015/10/15/migrer-aws-s3-azure-blob.html">
					<i class="fa fa-envelope fa-lg"></i>
				</a>
			</section>

			<section class="col-sm-6 author">
				<img src="http://www.gravatar.com/avatar/a4c48bb0b9e041ad0a5299f82b2b16d9" class="img-rounded author-image" />
				<h4 class="section-title author-name">Clément Demily</h4>
				<p class="author-bio">Développeur Lillois</p>
			</section>
		</div>

		<div class="clearfix"></div>

		<ul class="pager">
			
			<li class="previous"><a href="/2015/10/15/creer-un-serveur-postgresql-sur-microsoft-azure.html"
					title="Créer un serveur postgresql sur microsoft azure">&larr; Précedent</a></li>
			
			
			<li class="next"><a href="/2016/04/21/mettre-a-jour-postgresql-et-la-gem-pg-sur-ubuntu.html" title="Mettre à jour postgresql et la gem pg sur ubuntu">Suivant
					&rarr;</a></li>
			
		</ul>

		<hr />

		<div id="disqus_thread"></div>

		<script type="text/javascript">
			var disqus_shortname = 'zendev';
			(function () {
				var dsq = document.createElement('script');
				dsq.type = 'text/javascript';
				dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>

		<noscript>
			Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by
				Disqus.</a>
		</noscript>


	</div>

	<div class="col-sm-2 sidebar-2">

	</div>
</div>
<div class="clearfix"></div>


		<footer>
			<hr />
			<p>
				<a href="/mentions-legales/" title="mentions-legales">Mentions légales</a>
				|
				<a href="/about/" title="about">À propos</a>
				<br />
				&copy; 2019 Clément Demily powered by <a href="http://jekyllrb.com"
					rel="nofollow" class="jekyll-link">Jekyll</a>.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>

	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES * * */
		var disqus_shortname = 'zendev';

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function () {
			var s = document.createElement('script');
			s.async = true;
			s.type = 'text/javascript';
			s.src = '//' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
		}());
	</script>

	<script type="text/javascript">
		(function (i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function () {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date();
			a = s.createElement(o),
				m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m)
		})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-47963410-1', 'auto');
		ga('send', 'pageview');
	</script>

</body>

</html>
